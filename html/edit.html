<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Game - Bamboozle</title>
    
    <!-- CSS -->
    <link href="../css/base.css" rel="stylesheet">
    <link href="../css/components.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" type="image/png" href="../img/logo.png">
</head>
<body class="min-h-screen">
    <a href="#main-content" class="skip-to-content">Saltar al contenido principal</a>
    <div id="sr-live-region" class="sr-live-region" aria-live="polite" aria-atomic="true"></div>

    <!-- Navegación -->
    <header class="header">
        <nav class="nav">
            <div class="flex items-center space-x-8">
                <a href="game-main.html" class="nav-brand hover:opacity-70">
                    <span class="sr-only">Ir a la página principal</span>
                    <svg width="29" height="29" viewBox="0 0 29 29" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
                        <path d="M2.12499 15.8749H3.49999V25.4999C3.49999 27.0124 4.73749 28.2499 6.24999 28.2499H22.75C24.2625 28.2499 25.5 27.0124 25.5 25.4999V15.8749H26.875C27.425 15.8749 27.9337 15.5449 28.14 15.0224C28.3462 14.5137 28.2362 13.9224 27.8375 13.5237L15.4762 1.14869C15.349 1.02123 15.1979 0.920097 15.0316 0.851098C14.8653 0.782098 14.6869 0.746582 14.5069 0.746582C14.3268 0.746582 14.1485 0.782098 13.9821 0.851098C13.8158 0.920097 13.6647 1.02123 13.5375 1.14869L1.14874 13.5237C0.749992 13.9224 0.639992 14.5137 0.846242 15.0224C1.05249 15.5312 1.56124 15.8749 2.11124 15.8749H2.12499ZM14.5 4.06369L22.75 12.3137V25.4999H6.24999V12.3137L14.5 4.06369Z" fill="#ECECEC"/>
                    </svg>
                </a>

                <div class="nav-links">
                    <a href="#" class="nav-link">Games</a>
                    <a href="#" class="nav-link">Blog</a>
                    <a href="#" class="nav-link">Class PIN</a>
                </div>
            </div>

            <div class="nav-links">
                <a href="#" class="nav-link">Sign in</a>
                <a href="#" class="btn btn-rounded bg-accessible-blue" style="color: #fff; opacity: 1;">
                    Join for Free
                </a>
            </div>

            <button id="hamburger-btn" class="hamburger">☰</button>
        </nav>
    </header>

    <!-- Título de la página -->
    <div class="bg-bam-yellow text-bam-dark p-6">
        <div class="container flex justify-between items-center flex-wrap gap-4">
            <div>
                <h1 class="text-4xl font-bold">Edit Game</h1>
                <p class="font-semibold">Verbs followed by gerunds or infinitive (no diff...)</p>
            </div>
            <div class="flex items-center space-x-2">
                <button class="btn btn-primary" onclick="window.location.href='game-main.html'">
                    Back to Game
                </button>
            </div>
        </div>
    </div>

    <!-- Contenido Principal -->
    <main id="main-content" role="main" class="container p-4 md:p-8">
        
        <!-- Barra de herramientas superior -->
        <div class="flex justify-end items-center space-x-2 mb-6">
            <button class="btn btn-secondary">Import</button>
            <button class="btn btn-secondary">Multiple Choice</button>
            <button class="btn btn-secondary">Settings</button>
            <button class="btn btn-danger">Delete</button>
        </div>

        <!-- Formulario de Edición -->
        <div class="card mb-8">
            <div class="card-header">
                <h2 class="card-title">Add/Edit Question</h2>
            </div>
            
            <div class="card-body">
                <form id="edit-form" class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4">
                    <div class="form-group">
                        <label for="question" class="form-label">Question</label>
                        <input type="text" id="question" name="question" class="form-input" placeholder="Enter your question here...">
                        <div id="question-error" class="form-error"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="answer" class="form-label">Answer</label>
                        <input type="text" id="answer" name="answer" class="form-input" placeholder="Enter the correct answer...">
                        <div id="answer-error" class="form-error"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="points" class="form-label">Points</label>
                        <input type="number" id="points" name="points" value="15" class="form-input w-full md:w-1/2" min="1" max="100">
                        <div id="points-error" class="form-error"></div>
                    </div>
                    
                    <div class="form-group">
                        <label class="block text-sm text-gray-600 mb-1">
                            Browse gifs, upload image or paste URL
                            <input type="text" name="media" class="form-input" />
                        </label>
                        <div class="mt-2">
                            <label class="block text-sm text-gray-600 mb-1">Browse gifs, upload image or paste URL</label>
                            <button type="button" class="btn btn-sm" style="background-color: var(--bam-pink); color: white;">
                                Image Library
                            </button>
                        </div>
                    </div>
                    
                    <div class="md:col-span-2 flex items-center space-x-4 mt-4">
                        <button type="submit" class="btn btn-info btn-lg">Save</button>
                        <button type="button" class="btn btn-secondary btn-lg" onclick="document.getElementById('edit-form').reset();">Clear</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Lista de preguntas existentes -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">Current Questions</h2>
                <p class="card-subtitle">Click on any question to edit it</p>
            </div>
            
            <div class="card-body">
                <div id="questions-list" class="space-y-4">
                    <!-- Las preguntas se generan con JavaScript -->
                </div>
            </div>
        </div>
    </main>

    <!-- Menú móvil -->
    <div id="mobile-menu" class="mobile-menu">
        <button id="close-menu-btn" class="mobile-menu-close">&times;</button>
        <nav class="mobile-menu-links">
            <a href="#" class="mobile-menu-link">Games</a>
            <a href="#" class="mobile-menu-link">Blog</a>
            <a href="#" class="mobile-menu-link">Class PIN</a>
            <hr class="border-gray-600 my-4"/>
            <a href="#" class="mobile-menu-link">Sign in</a>
            <a href="#" class="btn btn-primary btn-rounded text-center">Join for Free</a>
        </nav>
    </div>

    <!-- Scripts -->
    <script src="../js/utils.js"></script>
    <script src="../js/ui.js"></script>
    <script src="../js/game.js"></script>
    <script src="../js/keyboard-shortcuts.js"></script>
    <script src="../js/accessibility-enhancer.js"></script>
    <script>
        // Lógica específica para la página de edición
        document.addEventListener('DOMContentLoaded', function() {
            const { EditorController } = window.BammoozleGame;
            
            // Inicializar el controlador de editor
            EditorController.init();
            
            // Funcionalidad adicional para la página de edición
            const imageLibraryBtn = document.querySelector('button[style*="--bam-pink"]');
            if (imageLibraryBtn) {
                imageLibraryBtn.addEventListener('click', () => {
                    const { NotificationSystem } = window.BammoozleUtils;
                    NotificationSystem.info('Image Library feature coming soon!');
                });
            }
            
            // Validación adicional para el formulario
            const form = document.getElementById('edit-form');
            const questionInput = document.getElementById('question');
            const answerInput = document.getElementById('answer');
            const pointsInput = document.getElementById('points');
            
            // Validación en tiempo real
            questionInput.addEventListener('blur', () => {
                const { ValidationUtils } = window.BammoozleUtils;
                const result = ValidationUtils.validateRequired(questionInput.value, 'Question');
                if (!result.isValid) {
                    ValidationUtils.showFieldError('question', result.message);
                } else {
                    ValidationUtils.showFieldError('question', '');
                }
            });
            
            answerInput.addEventListener('blur', () => {
                const { ValidationUtils } = window.BammoozleUtils;
                const result = ValidationUtils.validateRequired(answerInput.value, 'Answer');
                if (!result.isValid) {
                    ValidationUtils.showFieldError('answer', result.message);
                } else {
                    ValidationUtils.showFieldError('answer', '');
                }
            });
            
            pointsInput.addEventListener('blur', () => {
                const { ValidationUtils } = window.BammoozleUtils;
                const value = parseInt(pointsInput.value);
                if (!value || value < 1 || value > 100) {
                    ValidationUtils.showFieldError('points', 'Points must be between 1 and 100');
                } else {
                    ValidationUtils.showFieldError('points', '');
                }
            });
            
            // Atajos de teclado
            document.addEventListener('keydown', (e) => {
                // Ctrl + S para guardar
                if (e.ctrlKey && e.key === 's') {
                    e.preventDefault();
                    form.dispatchEvent(new Event('submit'));
                }
                
                // Ctrl + N para nueva pregunta
                if (e.ctrlKey && e.key === 'n') {
                    e.preventDefault();
                    form.reset();
                    questionInput.focus();
                }
            });
            
            // Mostrar información de atajos
            const { NotificationSystem } = window.BammoozleUtils;
            setTimeout(() => {
                NotificationSystem.info('Tip: Use Ctrl+S to save, Ctrl+N for new question');
            }, 2000);
        });
    </script>
</body>
</html>