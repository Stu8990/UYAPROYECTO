<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Game - Bammoozle</title>
    
    <!-- CSS -->
    <link href="../css/base.css" rel="stylesheet">
    <link href="../css/components.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen">
    <a href="#main-content" class="skip-to-content">Saltar al contenido principal</a>
    <div id="sr-live-region" class="sr-live-region" aria-live="polite" aria-atomic="true"></div>

    <!-- Navegación -->
    <header class="header-light">
        <nav class="nav">
            <div class="flex items-center space-x-8">
                <a href="../index.html" class="nav-brand hover:opacity-70">
                    <svg width="33" height="33" viewBox="0 0 33 33" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M4.125 17.875H5.5V27.5C5.5 29.0125 6.7375 30.25 8.25 30.25H24.75C26.2625 30.25 27.5 29.0125 27.5 27.5V17.875H28.875C29.425 17.875 29.9338 17.545 30.14 17.0225C30.3463 16.5138 30.2362 15.9225 29.8375 15.5238L17.4762 3.14875C17.349 3.02128 17.1979 2.92015 17.0316 2.85115C16.8653 2.78216 16.687 2.74664 16.5069 2.74664C16.3268 2.74664 16.1485 2.78216 15.9821 2.85115C15.8158 2.92015 15.6647 3.02128 15.5375 3.14875L3.14875 15.5238C2.75 15.9225 2.64 16.5138 2.84625 17.0225C3.0525 17.5312 3.56125 17.875 4.11125 17.875H4.125ZM16.5 6.06375L24.75 14.3138V27.5H8.25V14.3138L16.5 6.06375Z" fill="#333333"/>
                    </svg>
                </a>
                
                <div class="nav-links">
                    <a href="#" class="nav-link">Games</a>
                    <a href="#" class="nav-link">Blog</a>
                    <a href="#" class="nav-link">Class PIN</a>
                </div>
            </div>
            
            <div class="nav-links">
                <a href="#" class="nav-link">Sign in</a>
                <a href="#" class="btn btn-info btn-sm btn-rounded">Join for Free</a>
            </div>
            
            <button id="hamburger-btn" class="hamburger">☰</button>
        </nav>
    </header>

    <!-- Título de la página -->
    <div class="bg-bam-yellow text-bam-dark p-6">
        <div class="container flex justify-between items-center flex-wrap gap-4">
            <div>
                <h1 class="text-4xl font-bold">Edit Game</h1>
                <p class="font-semibold">Verbs followed by gerunds or infinitive (no diff...)</p>
            </div>
            <div class="flex items-center space-x-2">
                <button class="btn btn-primary" onclick="window.location.href='game-main.html'">
                    Back to Game
                </button>
            </div>
        </div>
    </div>

    <!-- Contenido Principal -->
    <main id="main-content" role="main" class="container p-4 md:p-8">
        
        <!-- Barra de herramientas superior -->
        <div class="flex justify-end items-center space-x-2 mb-6">
            <button class="btn btn-secondary">Import</button>
            <button class="btn btn-secondary">Multiple Choice</button>
            <button class="btn btn-secondary">Settings</button>
            <button class="btn btn-danger">Delete</button>
        </div>

        <!-- Formulario de Edición -->
        <div class="card mb-8">
            <div class="card-header">
                <h2 class="card-title">Add/Edit Question</h2>
            </div>
            
            <div class="card-body">
                <form id="edit-form" class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4">
                    <div class="form-group">
                        <label for="question" class="form-label">Question</label>
                        <input type="text" id="question" name="question" class="form-input" placeholder="Enter your question here...">
                        <div id="question-error" class="form-error"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="answer" class="form-label">Answer</label>
                        <input type="text" id="answer" name="answer" class="form-input" placeholder="Enter the correct answer...">
                        <div id="answer-error" class="form-error"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="points" class="form-label">Points</label>
                        <input type="number" id="points" name="points" value="15" class="form-input w-full md:w-1/2" min="1" max="100">
                        <div id="points-error" class="form-error"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="image-options" class="form-label">Image options</label>
                        <input type="text" id="image-options" name="image-options" class="form-input" placeholder="Image URL or search term">
                        <div class="mt-2">
                            <label class="block text-sm text-gray-600 mb-1">Browse gifs, upload image or paste URL</label>
                            <button type="button" class="btn btn-sm" style="background-color: var(--bam-pink); color: white;">
                                Image Library
                            </button>
                        </div>
                    </div>
                    
                    <div class="md:col-span-2 flex items-center space-x-4 mt-4">
                        <button type="submit" class="btn btn-info btn-lg">Save</button>
                        <button type="button" class="btn btn-secondary btn-lg" onclick="document.getElementById('edit-form').reset();">Clear</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Lista de preguntas existentes -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">Current Questions</h2>
                <p class="card-subtitle">Click on any question to edit it</p>
            </div>
            
            <div class="card-body">
                <div id="questions-list" class="space-y-4">
                    <!-- Las preguntas se generan con JavaScript -->
                </div>
            </div>
        </div>
    </main>

    <!-- Menú móvil -->
    <div id="mobile-menu" class="mobile-menu">
        <button id="close-menu-btn" class="mobile-menu-close">&times;</button>
        <nav class="mobile-menu-links">
            <a href="#" class="mobile-menu-link">Games</a>
            <a href="#" class="mobile-menu-link">Blog</a>
            <a href="#" class="mobile-menu-link">Class PIN</a>
            <hr class="border-gray-600 my-4"/>
            <a href="#" class="mobile-menu-link">Sign in</a>
            <a href="#" class="btn btn-primary btn-rounded text-center">Join for Free</a>
        </nav>
    </div>

    <!-- Scripts -->
    <script src="../js/utils.js"></script>
    <script src="../js/ui.js"></script>
    <script src="../js/game.js"></script>
    <script src="../js/keyboard-shortcuts.js"></script>
    <script src="../js/accessibility-enhancer.js"></script>
    <script>
        // Lógica específica para la página de edición
        document.addEventListener('DOMContentLoaded', function() {
            const { EditorController } = window.BammoozleGame;
            
            // Inicializar el controlador de editor
            EditorController.init();
            
            // Funcionalidad adicional para la página de edición
            const imageLibraryBtn = document.querySelector('button[style*="--bam-pink"]');
            if (imageLibraryBtn) {
                imageLibraryBtn.addEventListener('click', () => {
                    const { NotificationSystem } = window.BammoozleUtils;
                    NotificationSystem.info('Image Library feature coming soon!');
                });
            }
            
            // Validación adicional para el formulario
            const form = document.getElementById('edit-form');
            const questionInput = document.getElementById('question');
            const answerInput = document.getElementById('answer');
            const pointsInput = document.getElementById('points');
            
            // Validación en tiempo real
            questionInput.addEventListener('blur', () => {
                const { ValidationUtils } = window.BammoozleUtils;
                const result = ValidationUtils.validateRequired(questionInput.value, 'Question');
                if (!result.isValid) {
                    ValidationUtils.showFieldError('question', result.message);
                } else {
                    ValidationUtils.showFieldError('question', '');
                }
            });
            
            answerInput.addEventListener('blur', () => {
                const { ValidationUtils } = window.BammoozleUtils;
                const result = ValidationUtils.validateRequired(answerInput.value, 'Answer');
                if (!result.isValid) {
                    ValidationUtils.showFieldError('answer', result.message);
                } else {
                    ValidationUtils.showFieldError('answer', '');
                }
            });
            
            pointsInput.addEventListener('blur', () => {
                const { ValidationUtils } = window.BammoozleUtils;
                const value = parseInt(pointsInput.value);
                if (!value || value < 1 || value > 100) {
                    ValidationUtils.showFieldError('points', 'Points must be between 1 and 100');
                } else {
                    ValidationUtils.showFieldError('points', '');
                }
            });
            
            // Atajos de teclado
            document.addEventListener('keydown', (e) => {
                // Ctrl + S para guardar
                if (e.ctrlKey && e.key === 's') {
                    e.preventDefault();
                    form.dispatchEvent(new Event('submit'));
                }
                
                // Ctrl + N para nueva pregunta
                if (e.ctrlKey && e.key === 'n') {
                    e.preventDefault();
                    form.reset();
                    questionInput.focus();
                }
            });
            
            // Mostrar información de atajos
            const { NotificationSystem } = window.BammoozleUtils;
            setTimeout(() => {
                NotificationSystem.info('Tip: Use Ctrl+S to save, Ctrl+N for new question');
            }, 2000);
        });
    </script>
</body>
</html>